# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/135zFrdpZJ1VFVgF3GSOHiMQoNaljRpAy
"""


import numpy as np
import joblib
import streamlit as st

model = joblib.load("ev_blast_prediction.pkl")

import streamlit as st
import numpy as np
import pickle

# Page config (must be first)
st.set_page_config(page_title="Battery Health Prediction")

# Load model


st.title("üîã Battery Health Prediction App")
st.write("Predict **Battery Health** based on risk and design factors")

# Inputs (match column order exactly)
Battery_Type = st.selectbox(
    "Battery Type",
    options=[0, 1],  # change if you used label encoding
    format_func=lambda x: "Lithium-ion" if x == 1 else "Other"
)

Poor_Cell_Design = st.selectbox("Poor Cell Design",value=None )
External_Abuse = st.selectbox("External Abuse",value=None )
Poor_Battery_Design = st.selectbox("Poor Battery Design",value=None)
Short_Circuits = st.selectbox("Short Circuits",value=None)
Temperature = st.number_input("Operating Temperature (¬∞C)", value=None)
Overcharge_Overdischarge = st.selectbox("Overcharge / Overdischarge", value=None)
Battery_Maintenance = st.selectbox("Battery Maintenance", value=None)

# Prediction
if st.button("Predict Battery Health"):
    input_data = np.array([[
        Battery_Type,
        Poor_Cell_Design,
        External_Abuse,
        Poor_Battery_Design,
        Short_Circuits,
        Temperature,
        Overcharge_Overdischarge,
        Battery_Maintenance
    ]])

prediction = model.predict(input_data)[0]

    # Output labels (from CSV)
if prediction == "Blast":
        st.error("üí• Battery Health: **BLAST RISK**")
elif prediction == "Chance_of_Blast":
        st.warning("‚ö†Ô∏è Battery Health: **CHANCE OF BLAST**")
elif prediction == "Moderate":
        st.info("üîã Battery Health: **MODERATE**")
else:
        st.success("‚úÖ Battery Health: **GOOD**")
